================================================================================
                    ESTRUCTURA FINAL DEL PROYECTO v2.0.0
                       MongoDB â†’ PostgreSQL Migration
================================================================================

ğŸ“ DiagnosticoMantenimientoEquiposComputo/
â”‚
â”œâ”€â”€ ğŸ“š DOCUMENTACIÃ“N
â”‚   â”œâ”€â”€ README.md                               â† COMIENZA AQUÃ
â”‚   â”œâ”€â”€ MIGRATION_SUMMARY.md                    â† Resumen de cambios
â”‚   â”œâ”€â”€ MIGRATION_CHECKLIST.md                  â† Checklist de validaciÃ³n
â”‚   â”œâ”€â”€ MIGRACION_MONGODB_A_POSTGRESQL.md       â† GuÃ­a detallada
â”‚   â”œâ”€â”€ DATABASE_SCHEMA.md                      â† Esquema ER
â”‚   â”œâ”€â”€ SQL_QUERIES.md                          â† Queries comunes
â”‚   â”œâ”€â”€ DEPLOYMENT_GUIDE.md                     â† Deploy a prod
â”‚   â””â”€â”€ DOCUMENTATION_INDEX.md                  â† Ãndice docs
â”‚
â”œâ”€â”€ ğŸ”§ CONFIGURACIÃ“N
â”‚   â”œâ”€â”€ .env.example                            â˜… NUEVO
â”‚   â”œâ”€â”€ setup.sh                                InstalaciÃ³n automÃ¡tica
â”‚   â”œâ”€â”€ package.json                            Dependencias (ACTUALIZADO)
â”‚   â””â”€â”€ package-lock.json
â”‚
â”œâ”€â”€ ğŸ’¾ BACKEND (Node.js + Express + Sequelize)
â”‚   â””â”€â”€ back/
â”‚       â”œâ”€â”€ main.js                             API principal (ACTUALIZADO)
â”‚       â”œâ”€â”€ db.js                               â˜… NUEVO: Config PostgreSQL
â”‚       â”œâ”€â”€ seed_rules.js                       Cargar reglas (ACTUALIZADO)
â”‚       â”œâ”€â”€ migrate-data.js                     â˜… NUEVO: MigraciÃ³n datos
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“‹ models/
â”‚       â”‚   â”œâ”€â”€ User.js                         SQL Sequelize (ACTUALIZADO)
â”‚       â”‚   â”œâ”€â”€ Rule.js                         SQL Sequelize (ACTUALIZADO)
â”‚       â”‚   â””â”€â”€ Case.js                         SQL Sequelize (ACTUALIZADO)
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ›£ï¸  routes/
â”‚       â”‚   â””â”€â”€ auth.js                         Auth endpoints (ACTUALIZADO)
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ” middlewares/
â”‚           â””â”€â”€ requireAuth.js                  JWT middleware
â”‚
â”œâ”€â”€ ğŸ¨ FRONTEND (HTML/CSS/JS)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ register.html
â”‚   â””â”€â”€ front/
â”‚       â””â”€â”€ styles.css
â”‚
â”œâ”€â”€ ğŸ“Š DATOS
â”‚   â””â”€â”€ Arbol de Decision.json                  Reglas de diagnÃ³stico
â”‚
â””â”€â”€ ğŸ“ ARCHIVOS RAÃZ
    â””â”€â”€ PROJECT_STRUCTURE.txt                   Este archivo

================================================================================
                            DEPENDENCIAS ACTUALIZADAS
================================================================================

REMOVIDAS:
  âŒ mongoose ^8.6.0          (ODM para MongoDB)

AGREGADAS:
  âœ… sequelize ^6.35.2        (ORM para SQL)
  âœ… pg ^8.11.3               (Driver PostgreSQL)
  âœ… pg-hstore ^2.3.4         (JSONB support)

MANTENIDAS:
  âœ… argon2, cookie-parser, cors, dotenv, express, helmet
  âœ… jsonwebtoken, morgan, express-rate-limit

================================================================================
                            SCRIPTS NPM DISPONIBLES
================================================================================

npm run dev               Iniciar servidor API (puerto 4000)
npm run seed:rules       Cargar reglas desde Arbol de Decision.json
npm run migrate:data     Migrar datos de MongoDB a PostgreSQL

================================================================================
                            ESTRUCTURA DE BASE DE DATOS
================================================================================

PostgreSQL: expertos

â”œâ”€â”€ users                 (Usuarios registrados)
â”‚   â”œâ”€â”€ id (UUID PK)
â”‚   â”œâ”€â”€ email (VARCHAR UNIQUE)
â”‚   â”œâ”€â”€ name (VARCHAR)
â”‚   â”œâ”€â”€ passwordHash (VARCHAR)
â”‚   â”œâ”€â”€ createdAt (TIMESTAMP)
â”‚   â””â”€â”€ updatedAt (TIMESTAMP)
â”‚
â”œâ”€â”€ rules                 (Reglas de diagnÃ³stico)
â”‚   â”œâ”€â”€ id (UUID PK)
â”‚   â”œâ”€â”€ ruleId (VARCHAR UNIQUE) - F01..F25
â”‚   â”œâ”€â”€ conditions (ARRAY)
â”‚   â”œâ”€â”€ weight (FLOAT 0-1)
â”‚   â”œâ”€â”€ fault (VARCHAR)
â”‚   â”œâ”€â”€ advice (ARRAY)
â”‚   â”œâ”€â”€ createdAt (TIMESTAMP)
â”‚   â””â”€â”€ updatedAt (TIMESTAMP)
â”‚
â””â”€â”€ cases                 (Casos/diagnÃ³sticos)
    â”œâ”€â”€ id (UUID PK)
    â”œâ”€â”€ timestamp (DATETIME)
    â”œâ”€â”€ selected (ARRAY)
    â”œâ”€â”€ results (JSONB)
    â”œâ”€â”€ notes (TEXT)
    â”œâ”€â”€ userId (UUID FK â†’ users.id)
    â”œâ”€â”€ createdAt (TIMESTAMP)
    â””â”€â”€ updatedAt (TIMESTAMP)

================================================================================
                            ENDPOINTS API (Sin cambios)
================================================================================

AUTH:
  POST   /api/auth/register           Registrarse
  POST   /api/auth/login              Iniciar sesiÃ³n
  POST   /api/auth/logout             Cerrar sesiÃ³n
  GET    /api/auth/me                 Usuario actual

REGLAS:
  GET    /api/rules                   Obtener todas las reglas
  POST   /api/rules/bulk              Cargar reglas en lote

CASOS:
  POST   /api/cases                   Crear nuevo caso
  GET    /api/cases                   Obtener casos recientes
  GET    /api/my-cases                Obtener mis casos

SALUD:
  GET    /api/health                  Verificar estado

================================================================================
                            GUÃA DE INICIO RÃPIDO
================================================================================

1. INSTALAR POSTGRESQL
   macOS:    brew install postgresql && brew services start postgresql
   Linux:    sudo apt-get install postgresql && sudo systemctl start postgresql
   Windows:  Descargar desde postgresql.org

2. CREAR BASEDATOS
   psql -U postgres
   CREATE DATABASE expertos;
   \q

3. CONFIGURAR VARIABLES
   cp .env.example .env
   # Editar .env con credenciales

4. INSTALAR DEPENDENCIAS
   npm install

5. INICIAR SERVIDOR
   npm run dev

6. CARGAR REGLAS
   npm run seed:rules

7. ACCEDER AL FRONTEND
   Abre http://localhost:5500

================================================================================
                            CAMBIOS PRINCIPALES
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ANTES (v1.0.0)              â”‚ AHORA (v2.0.0)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mongoose + MongoDB          â”‚ Sequelize + PostgreSQL                   â”‚
â”‚ .find()                     â”‚ .findAll()                               â”‚
â”‚ .deleteMany()               â”‚ .destroy({ where: {} })                 â”‚
â”‚ .insertMany()               â”‚ .bulkCreate()                            â”‚
â”‚ user: req.user.id           â”‚ userId: req.user.id                      â”‚
â”‚ _id (ObjectId)              â”‚ id (UUID)                                â”‚
â”‚ Documentos sin esquema      â”‚ Tablas con esquema estricto             â”‚
â”‚ Transacciones limitadas     â”‚ ACID completo                            â”‚
â”‚ Escalabilidad horizontal    â”‚ Escalabilidad vertical/horizontal       â”‚
â”‚ NoSQL queries              â”‚ SQL estÃ¡ndar                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                            VERIFICACIÃ“N POST-MIGRACIÃ“N
================================================================================

âœ… Todas las funcionalidades miradas
âœ… APIs mantienen la misma interfaz
âœ… Base de datos relacional configurada
âœ… AutenticaciÃ³n funcionando
âœ… CORS y seguridad habilitados
âœ… Scripts de seed preparados
âœ… DocumentaciÃ³n completa
âœ… Ready para producciÃ³n

================================================================================
                            PRÃ“XIMOS PASOS
================================================================================

1. Prueba el sistema localmente
   â†’ npm run dev
   â†’ npm run seed:rules

2. Valida datos (si migraste desde MongoDB)
   â†’ npm run migrate:data

3. Considera deployment en:
   â†’ Railway.app (â­ Recomendado)
   â†’ Heroku
   â†’ AWS
   â†’ DigitalOcean

4. Implementa:
   â†’ Backups automÃ¡ticos
   â†’ Monitoreo
   â†’ Logs centralizados

Ver: DEPLOYMENT_GUIDE.md para mÃ¡s detalles

================================================================================
                            RECURSOS Y DOCUMENTACIÃ“N
================================================================================

ğŸ“š DocumentaciÃ³n Interna:
   README.md                  GuÃ­a general
   MIGRATION_SUMMARY.md       Resumen de cambios
   DATABASE_SCHEMA.md         Esquema de BD
   SQL_QUERIES.md             Queries SQL comunes
   DEPLOYMENT_GUIDE.md        Deploy en producciÃ³n

ğŸ”— DocumentaciÃ³n Externa:
   https://www.postgresql.org/docs/
   https://sequelize.org/
   https://nodejs.org/en/docs/
   https://expressjs.com/

ğŸ› ï¸ Herramientas Recomendadas:
   DBeaver     - Cliente SQL GUI
   pgAdmin     - Gestor PostgreSQL web
   Postman     - API Tester
   VS Code     - Editor de cÃ³digo

================================================================================
                        FECHA: 11 de noviembre de 2025
                        VERSIÃ“N: 2.0.0
                        ESTADO: âœ… Ready for Production
================================================================================
